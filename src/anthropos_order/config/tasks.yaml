# src/anthropos_order/config/tasks.yaml

phase_0_objective_lock:
  description: >
    PHASE 0: Objective Lock.
    Based on the {expert_input} and {amazon_url}, define the one-line mission statement.
    Format: "This video sells X to Y by breaking belief Z using reason R."
  expected_output: >
    One-line Objective Lock statement.
  agent: manager

phase_1_avatar_selection:
  description: >
    PHASE 1: Avatar Selection (Broad Market).
    Using Byron Sharp logic, define the widest viable avatar label.
    Include symptom cluster (3-5 bullets), desired outcome (1 sentence + 3 bullets),
    most common objection (1 sentence + 3 variants), and trust heuristic.
  expected_output: >
    Avatar Spec (Broad Market).
  agent: market_research_agent

phase_2_market_language_mining:
  description: >
    PHASE 2: Market Language Mining.
    Mine language from {amazon_url} and general market data (TikTok/Reddit).
    Generate three language banks: Symptoms (20-50 words), Objections (10-25 words), 
    and Trust/Heuristic words (10-25 words). Extract the Top 5 phrases.
  expected_output: >
    Market Language Banks + Top 5 Phrases.
  agent: market_research_agent

phase_3_product_truth_extraction:
  description: >
    PHASE 3: Product Truth Extraction.
    Extract factual anchors (dosage, certs, testing) from {amazon_url}.
    Aggregate repeated review outcomes and flag "allowed" vs "risky" claims.
  expected_output: >
    Product Truth Anchors (Facts, review-proof anchors, claim flags).
  agent: product_truth_agent

phase_4_srw_selection:
  description: >
    PHASE 4: Single Reason to Win (SRW) Selection.
    Generate 3 candidates for the SRW, score them, and pick the winner.
    Include claim, mechanism (2-3 sentences), belief reframe (Old -> New), 
    and proof anchors linked to Product Truth.
  expected_output: >
    SRW (Claim, mechanism, belief break, proof anchors).
  agent: strategy_agent

phase_5_physics_template_commitment:
  description: >
    PHASE 5: Physics Template Commitment.
    Pick 1 structural template (e.g., Hook->Demo->Proof->CTA).
    Define the timebox plan: 0-6s, 6-20s, and Close.
  expected_output: >
    Structural Template + Timebox Plan.
  agent: physics_agent

phase_6_script_pack_generation:
  description: >
    PHASE 6: Script Pack Generation (Modular).
    Generate 6 hook variants (0-6s), 1 master body (6-20s), and 1 close CTA (final 20-30%).
    Use phrases from the Market Language Banks and link to SRW.
    DO NOT prescribe visuals or shots.
  expected_output: >
    Modular Script Pack (6 Hooks + Body + Close).
  agent: script_agent

phase_7_persona_modulation:
  description: >
    PHASE 7: Persona Modulation.
    Apply the voice of {persona_name} ({persona_description}) to the Script Pack.
    Preserve all strategic meaning and structural integrity.
  expected_output: >
    Persona-aligned Modular Script Pack.
  agent: persona_agent

phase_8_physics_audit:
  description: >
    PHASE 8: Physics Audit (Pass/Fail).
    Audit the persona-aligned script pack against physics gates:
    - Product/Result visible ≤3s.
    - Hook density 0-6s.
    - On-screen text requirement (timing only).
    - Multi-segment structure.
    - Explicit CTA in final segment.
    - Non-linearity test.
    If Fail: Provide EXACT wording fixes.
  expected_output: >
    Audit Report (Pass/Fail) + Required Fixes.
  agent: physics_agent

phase_9_final_order_assembly:
  description: >
    PHASE 9: Final Order Assembly (v2.1 Template).
    Assemble the final brief in the strictly defined v2.1 structure.
    Ensure Section 8 explicitly declares Publisher Autonomy.
  expected_output: >
    ## SECTION 1 — OBJECTIVE LOCK
    ## SECTION 2 — AVATAR SPEC (broad market)
    ## SECTION 3 — MARKET LANGUAGE BANKS (symptom / objection / trust)
    ## SECTION 4 — PRODUCT TRUTH ANCHORS (facts + review proof + claim flags)
    ## SECTION 5 — SINGLE REASON TO WIN (belief break + mechanism)
    ## SECTION 6 — SCRIPT PACK (6 hooks + master body + close CTA)
    ## SECTION 7 — PHYSICS AUDIT (pass/fail + required fixes)
    ## SECTION 8 — PUBLISHER AUTONOMY ZONE (explicit declaration)
  agent: manager
  output_file: 'final_order.md'
